A dynamic model for infectious diseases: The role of vaccination and treatment