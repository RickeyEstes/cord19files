Global analysis of an epidemic model with nonmonotone incidence rate