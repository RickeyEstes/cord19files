The AMPP is implemented as an extension of SASFLOW (33) , an automated data reduction and analysis pipeline currently running at P12. AMPP utilizes several modules and modeling programs available in the ATSAS package (34) and, in addition, calls the program MEMPROT (28) . The primary data analysis is executed directly upon completion of a SEC-SAXS data acquisition and proceeds in the following workflow ( Figure. 1) Radial integration of 2D SAXS images by RADAVER (33) (typically 1000-3000 frames are collected for a standard SEC-SAXS run set with one second exposure per image/frame). 2) Determination of the buffer and sample ranges from the elution profile using CHROMIXS (35) , an important analysis component of the pipeline specifically designed for SEC-SAXS analysis. CHROMIXS automatically identifies both buffer and sample regions in the elution profile, and performs frame averaging and subtraction to produce the SAXS curve of the purified component for subsequent analysis (Figure 2 ). It is worth noting that CHROMIXS is capable of identifying multiple elution peaks, providing the users with a set of distinct SAXS curves from individual fractions, if present. 3) Calculation of the overall parameters (radius of gyration R g , maximum size D max , excluded volume V Porod , molecular weight MW) and the generation of relevant plots (Guinier plot: ln I(s) vs s 2 ; Kratky plot: I(s)s 2 vs s; and the real-space distance distribution function: P(r) vs r) for all subtracted curves. An example of these plots for the mechanosensitive T2 channel data is shown in the generated summary table (Figure. 3). These parameters are employed for the evaluation of the search volume to conduct the ab initio reconstruction using MONSA or for the hybrid MEMPROT fitting procedures. 4) Querying and collecting the available a priori information from the ISPyB database via dedicated Simple Object Access Protocol (SOAP) web services. Depending on the results, one of the three modeling paths is executed for the subsequent modeling ( Figure. 1): author/funder. All rights reserved. No reuse allowed without permission. The copyright holder for this preprint (which was not peer-reviewed) is the . https://doi.org/10.1101/714303 doi: bioRxiv preprint Figure. 1. Workflow of the pipeline extension for MPs. The pipeline utilizes a priori data from the ISPyB database, calculates overall SAXS parameters and decides, which software to employ for the subsequent analysis. Figure. 2. An elution profile of T2 membrane protein, built by CHROMIXS from 1600 consequent SEC-SAXS data sets (average intensity versus frame number). The frames corresponding to the buffer and sample are automatically identified (marked by red and green, respectively), averaged and subtracted one from the other. The resulting curve is displayed in PRIMUS interface (inset). Initial estimates of the length of the detergent tail and head components are done using the Tanford formula for the detergent tail length: l c = 1.5 + 1.265n c , where n c is the total number of carbon atoms. The starting parameters for the evaluation of the corona geometry using MEMPROT (28) are determined as follows: For a spherical (ellipticity, e = 1) detergent torus with the height (a) and cross-sectional axes (minor = b/e, major = b•e) equal to the length of a detergent tail (Tanford tail ), the geometrical parameters are set as: a = b = t = Tanford tail (28) (Figure 4) , where t is the thickness of the hydrophilic detergent head group. Although the hydrophobic tail of a detergent is typically slightly longer than its hydrophilic head, this assumption appears to be a reasonable first approximation for the further refinement. AMPP employs the MEMPROT minimization procedure, refining the starting parameters within a limited range, estimated empirically based on several tests conducted on different MPs. The a, b and t parameters are searched in the ± 1/3(Tanford tail ) range, while ellipticity and rotation parameters are kept fixed in order to speed up the computations. The hydrophobic radius of the model is taken as a + t = 2•Tanford tail , which is in a good agreement with the statistical mean value of transmembrane thickness D Transmemb ≈ 30 ±3 Å, obtained from the OPM database (36) (https://opm.phar.umich.edu/types/1). The maximum value of D Transmemb is checked during the modelling such that it does not exceed 45 Å. 


Section:computational methods