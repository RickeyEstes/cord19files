The traditional method for detecting community structure in networks is hierarchical clustering. One first calculates a distance D ij for every pair i,j of vertices in the network, then takes all the n vertices in the network, with no edges between them, and adds edges between pairs one by one in order of their distance, starting with the pair with the shortest distance and progressing to the longest. As edges are added, the resulting graph shows a nested set of connected subsets of vertices, which are taken to be the communities. Algorithms of this kind are called agglomerative. Agglomerative methods have their problems, however. One concern is that they are rigid in that once a merge has been done it cannot be undone. Although there are smaller computational costs with this, it can also cause problems if an erroneous merge is done. Another is their tendency to find only the cores of communities and leave out the periphery. In Fig. 1 , there are a number of peripheral nodes whose community membership is obvious to the eye, in most cases they have only a single link to a specific community, but agglomerative methods often fail to place such nodes correctly. So far, the discussed algorithms define communities operationally as what they find, which is always down to the level of single nodes, independently from the type of graph analyzed. One cannot discriminate between net-works that are actually endowed with a community structure and those that are not. As a consequence, in practical applications, one needs additional, nontopological information on the nature of the network to understand whether the identification of a community is reliable. To this problem, a novel geometric measure is introduced (Guimera, 2004 (Guimera, , 2005a . For a given partition of the nodes of a network into communities, the modularity M of this partition is where n is the number of communities, L is the total number of links in the network, l i is the number of links between nodes in community i, and d i is the sum of the degrees of the nodes in community i. More precisely, the modularity M estimates the fraction of inward links in a community minus the expectation value of random connections, hence indicates the rationality of the community structure. Therefore, M will equal to zero if nodes are placed at random into communities or if all nodes are in the same cluster. To find the partition with largest modularity, simulated annealing (Kirkpatrick et al., 1983 ) is used to obtain the best determination of the community structure of a network by direct maximization of M. As is known, simulated annealing is a stochastic optimization technique that can find 'low cost' configurations without getting trapped in 'high cost' local minima. Here, the cost is C ¼ ÀM. At each temperature, a number of random updates are performed and accepted with probability where C a is the cost after the update and C b is the cost before the update; T is computational temperature. When temperature is high, the system can explore configurations of high cost while at low temperature the system only explores low cost regions. Starting at high temperature and slowly decreasing it, the system resides in deep minima, overcoming small cost barriers. Considering simulated annealing can carry out an exhaustive search and minimize the problem of finding sub-optimal partitions (Chou and Carlacci, 1991) , it is not strange that this method exhibits a better performance than that of the standard GN algorithm (Fig. 2) . It is noteworthy that, in this method, one does not need to specify a priori the number of communities; rather, the number of communities is an outcome of the algorithm. 


Section:agglomerative method
Section:simulated annealing method