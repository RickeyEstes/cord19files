At the urban scale, buildings can be treated as the surface roughness elements. Although the effect of the pressure drag of each building dominates the turbulent flow in the street canyon, the effects of pressure drag can be normalized or aggregated as the skin friction drag (shear stress) that results from the friction between large urban surfaces and air flow. This knowledge is considered as the quasiphysical reasoning that Prandtl's boundary layer theory presented in 1904 (Anderson, 2005) , the logarithmic wind profile, is valid for the airflow structure above the large urban area (Oke, 1987) . It is valid from z min to z max (the range of the thin shear layer), z min ) z 0 (surface roughness length), and z max ( d (boundary layer height) (Bottema, 1996) . Bottema (1996) stated that the vertical velocity gradient is the roughness constant in the Roughness Sub Layer (RSL), except several inhomogeneous horizontal flow (Arnfield, 2003) . Above z r (the blending height), at the top of the RSL, turbulence mixing becomes sufficient to ''blend'' the flow independent of the horizontal position (Garratt, 1978) . Notably, the height of z r depends on the urban density [1.5 z H (averaged building height) for high-density areas; 4 z H for low-density areas] (Oke, 2004) . From z r to d, the inhomogeneous building geometry length scales can be spatially-averaged by z 0 [similar to j 0 (Kármán constant) in the wall function of CFD], and the wind speed gradient in this layer can be estimated by z 0 and z d (displacement height) using the logarithmic equation. The importance of the aforementioned knowledge in wind engineering and urban design lies in the capability of aerodynamic properties to describe the urban surface roughness. Two methods are available for surface roughness modeling: surface roughness classification (Davenport et al., 2000) and morphometric modeling method (Bottema, 1995; Counihan, 1971; Grimmond and Oke, 1999; Kutzbach, 1961; Lettau, 1969; MacDonald et al., 1998; Raupach, 1992) . Surface roughness classification is based on the repeatable and verified field observation results. Given its feasibility and accuracy, roughness classification is often used to set the surrounding surface roughness as a boundary condition in practical applications of CFD simulation. However, if the types of surfaces are significantly different at the surrounding areas (resulting in insufficient fetch length for each surface type), selecting a single classification to represent roughness of the entire surrounding area becomes difficult. The morphometric method for the estimation of surface roughness (z 0 and z d ) is currently popular for its capability to test the spatial difference of the surface roughness in large continuous urban areas. The method makes the setting of the appropriate surrounding surface roughness easier. Grimmond and Oke (1999) conducted a broad and critical review to introduce various morphological models and to compare their sensitivities. Several models are only valid for low-density areas (Counihan, 1971; Kutzbach, 1961; Lettau, 1969; Raupach, 1992) : ku d and ku 0 : k p 6 0.29; Le 0 : k f 6 02$0.3; Co 0 : k p 6 0.5; Ra 0 : k f 6 0.25. Although recently available models (Bottema, 1996; MacDonald et al., 1998) attempted to extend the limitation for large surface roughness, such as built areas, z 0 meets the peak value with increasing roughness because of the skimming flow (Grimmond and Oke, 1999 ) (z 0 meets the peak for k f , which is approximately 0.2 in Bottema's model (Bottema, 1996) . Therefore, z d always has to be incorporated into the estimates of the surface roughness at urban areas. Mesoscale airflow modeling is used to model the airflow pattern in the atmospheric boundary layer directly. Therefore, except for the surrounding surface roughness, another important boundary condition, the incoming wind velocity at the reference height, can be estimated by using meso-scale airflow modeling: boundary-layer wind tunnel or numerical modeling. The use of a non-aeronautical wind tunnel for the atmospheric boundary layer is based on two important theories: (1) Prandtl's theory (logarithmic profile for wind speed); (2) scale model theory: the same ratio of z H to z 0 in the model and prototype (Plate, 1982) . Plate (1999) reviewed several important issues for the wind tunnel experiment, such as the scaled modeling, input wind profile setting, and application framework of wind tunnel in urban planning. Kubota et al. (2008) conducted a 1:300 wind tunnel experiment to test the effect of local building density on pedestrian-level wind velocities. The atmospheric transport and dispersion around the World Trade Center site were examined by a 1:600 scale wind tunnel experiment (Perry et al., 2004) . In Hong Kong, the Wind/Wave Tunnel Facility conducted experiments to understand the wind availability and flow characteristics at metropolitan areas (Hong Kong Planning Department, 2008) , which were frequently used as the input data for city-scale CFD simulation. Three-dimensional mesoscale boundary-layer turbulence closure numerical models, which have been rapidly developed since the 1970s' Yamada, 1974, 1982) , are mainly applied to solve geophysical fluid problems in the planetary boundary layer (Pielke et al., 1992; Yamada and Bunker, 1989) . Regional numerical weather predictions were realized by integrating turbulence closure models with heat exchange and energy balance models to describe and predict atmospheric mesoscale phenomena. With the increasing concern on urban environmental issues, such as urban morphology, land-use, and anthropogenic heat emission, researchers have attempted to downscale the weather forecast modeling to test urbanization effects on the urban environment, such as urban heat island and air pollutant distribution. Associated with the surface energy balance model, higher order turbulence model for atmospheric circulation, called the Mellor-Yamada hierarchy model (level 2.5), was used to test the effects of land use on the urban environment (Mochida et al., 1997; Murakami, 2004) . The domain of regional-scale simulation covered 480 km Â 480 km Â 5 km. The uniform horizontal grid size was 8 km Â 8 km, and the vertical grid space was enlarged from 4 m above the ground by using a total of 20 vertical layers. The simulation at the local scale can be performed in the high resolution because of the super computational capability of the Earth simulator. Ashie et al. (2009) used the standard j-e turbulence model with integration of the buoyancy of vapor and Coriolis force to simulate Tokyo's heat island phenomenon in very high resolution (5 m square horizontal and 1 m -10 m vertical intervals in a 3 km Â 3 km Â 500 m domain: approximately 5 Â 10 9 grid points). Given the high resolution, the wind velocity data at 5 m above ground was available to evaluate local wind availability. A similar simulation for Hong Kong was conducted in 2011 to verify the research on urban climatic map analysis (Ng, 2012) . The National Center for Atmospheric Research (NCAR) in America successively provided two mesoscale prognostic weather models: the fifth-generation NCAR Mesoscale model (MM5) (Grell et al., 1994) and the Weather Research and Forecasting (WRF) (Skamarock et al., 2005) . MM5 was successfully used in large-scale wind environment research (Dudhia, 1993; Berg and Zhong, 2005) . Combining the MM5 model with the California Meteorological Model (CALMET) model (Scire et al., 2000) , Yim et al. (2007) calculated the local wind availability in Hong Kong in high resolution (resolutions in MM5 and CALMET: 1 km and 100 m). WRF, as the next-generation prognostic weather model, is currently very popular and is increasingly being applied in urban environment research by coupling with the data set of the urban morphology (Chen et al., 2011) . Given that the real airflow is used in the wind tunnel experiment, the wind data reproduced in the wind tunnel experiment is much more accurate than the estimation in the numerical modeling, which is based on several basic assumptions for the turbulence flow. However, the turbulent flow, heat exchange, energy balance, vapor buoyancy, and even the Coriolis force can be coupled in the numerical modeling. This coupled modeling is impossible to the wind tunnel experiment. With the rapid computer capability development, higher resolution and more advanced physical models are being applied in simulations to improve the accuracy. Based on the discussion in Sections 2-4, a procedural framework for the practical application of CFD simulation in architectural design is presented as shown in Fig. 1 . In step 1, the appropriate modeling methods have to be chosen to initialize the boundary condition in the CFD simulation: calculating the surrounding surface roughness and input wind data (wind speeds at the reference height). According to the review in Section 2, the appropriate modeling methods can be chosen based on particular modeling needs, available computer capability, and input data sources. In step 2, based on the discussion in Section 3, the accuracy of CFD simulation can be verified by using existing practical guidelines and sensitivity tests for grid dependence and iterative convergence criteria. In the sensitivity tests, two testing scenarios were modeled in a similar manner, except that the scenarios have different grid point numbers or convergence criteria. The hypothesis testing (ANOVA) and regression analysis were conducted to determine whether significant differences exist between the match pair. If the wind data distributions in different scenarios are similar (without significant difference), the simulation results are independent of the grid point number or convergence criteria. Among them, the lower standards of the grid point number and convergence criteria can be applied to decrease the computational cost. If the distributions are significantly different, more testing scenarios are needed until the acceptable threshold values for the grid point number and convergence criteria are determined. Step 3 involves data collection and interpretation for the architectural design process. To ensure that the post-process is sufficient for knowledge-based decision making, scientific decisions should be based on the statistical modeling of the wind data collected at the appropriate test points; that is, the test point location has to be unbiased, and the test point number should be adequate. As shown in Fig. 1 , data analysis should be globally and locally conducted to evaluate both the effects of proposed building on the whole surrounding wind environment and the effects on the local areas with design strategy importance. Both of them are significantly important for the decision making in the architectural design process. First, a description of the pedestrian-level wind environment for all scenarios (different design options in different prevailing wind directions) is presented by using global wind contour and vector maps over the entire modeling area. Thus, architects can quickly grasp the effects of the proposed building on the surrounding wind environment. Second, statistical modeling is used to integrate the wind conditions in several prevailing wind directions and to prescribe the averaged natural ventilation performance for the further evaluation of the wind environments. Cooperating with the aforementioned wind contour and vector maps, the analysis can facilitate quantitative understanding of the surrounding wind environments, which is especially useful for the cross-comparison of different design options. In the statistical modeling of this study, the distribution of the overall wind velocity ratio (VR w,j ) is used. The VR w,j for each test point is calculated as (Hong Kong Planning Department (HKPD), 2008): where P i is the annual probability of the prevailing wind approaching the target area from the direction (i), and n is the number of prevailing wind directions considered in the simulation. VR i,j is the wind velocity ratio in the particular wind direction (i). VR i,j can be calculated as (HKPD, 2008): where V p,i,,j is the j-th test point's wind velocity at the pedestrian level in a particular wind direction (i), and V i is the wind velocity at the reference height in a particular wind direction (i). Third, the wind data of test points located at areas with strategic importance is statistically analyzed by the wind velocity ratio polar. The wind velocity ratios in different input prevailing wind directions at a test point are plotted into a wind rose. This method can provide more detailed information than global evaluation, such as the reason why the VR w,j of test points are lower than expected, as well as the identification of parts of a building which block airflow in certain input wind directions. This kind of understandings is useful for architects to optimize the optional design options. 


Section:surface roughness modeling (morphologic method)
Section:mesoscale airflow modeling (physical and numerical method)
Section:framework and methodology