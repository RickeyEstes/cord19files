In this section, we use two different risk functions-Eq. (7) for the uniform case and Eq. (9) for the preferential case-to study their different effects on the dynamics of epidemics. Our main results are based on the scale-free BA network proposed by Barabási and Albert (BA) in 1999 [33] . We also use the random network [34] here as a comparison, when the effects of structure on the dynamics of epidemic are considered. Both of them have the same size here are averaged over 50 realizations. Now, we investigate how different factors affect the dynamics of an epidemic on complex networks. First we study the effects of discount factor δ on the spread of epidemics in general. From the definition of δ, we know that for both the uniform case and the preferential case, the smaller δ is, the less loss from infection. So a lower level of vaccination causes a higher level of infection. The analysis is verified by Fig. 1 . It is well known that the structure of networks have a strong influence on the spread of an epidemic. For example, because of the existence of hub nodes, the spread of an epidemic on scalefree networks is much easier than other types of networks, such as random networks and small-world networks [9, 10, 19] . However, in our previous work [35] , we showed that diseases can be more effectively controlled on scale-free networks than on random networks when voluntary vaccination mechanisms are considered (see Fig. 2 in Ref. [35] ). Though the result is encouraging, we have assumed one ideal situation: each node knows the number of infectious neighbors. In practice, individuals can hardly know how many neighbors are infected. Take sexually transmitted diseases as an example, even when infected, individuals may not want others to know their illnesses for some reasons. As a result, their sexual partners do not know whether he/she is infected. In the present work, we relax the severe condition and study the effects of two more realistic cases-the uniform case and the preferential case on controlling the spread of diseases, neither of these cases requires detailed information on how many neighbors are infected. It is then natural to ask: what will occur in these two cases? We first compare the effects of the uniform case on the BA network and on an ER network. From Fig. 2(a) , one can find that the number of infections on the BA network is larger than on the ER network. Namely, under the voluntary vaccination mechanism, the uniform case is invalid for the BA network. This is a frustrating result as many social contact patterns can be viewed as scalefree networks. A natural question is: whether such worsening will happen in the preferential case too? Luckily, as shown in Fig. 2(b) , even the small improvement in the perceived risk function in the preferential case, an exciting result emerges: the number of infections on the BA network is less than that of the ER networks. It is encouraging to see that there is even less restriction for the preferential case, it also has a positive result. To explain such a substantial change, we study the inclination for these two different cases in more detail. We define vaccination inclination ρ k for nodes with different k as:  where n k is the number of nodes with degree k, and v k is the number of vaccination with degree k over the whole time range t ∈ [0, 500]. Fig. 3 plots the vaccination inclination ρ k for individuals with different k for the uniform case and the preferential case, respectively. For the preferential case, at first, the nodes with small degree (e.g., k < 18) have no inclination for vaccination (i.e., ρ k<18 = 0). Such a result can be explained as: from the red line in Fig. 2(b) , one can find that the number of infections is always lower than 100, namely, I(t) < 100/N = 0.05. Under this condition β = 0.02, µ = 0.1, δ = 0.9 and k < 18, the risk function f P r in Eq. (9) is always smaller than the cost function f P v = 0.1, so their inclinations for vaccination are always zero. Then, the inclination ρ k increases with degree k, and this leads to the high inclination of hub nodes. This means that these hub nodes tend to take vaccination voluntarily, and the diseases can be effectively controlled on the BA networks. However, for the uniform case, we find that ''larger'' nodes have lower ρ k than ''smaller'' nodes. The phenomenon is somewhat against our intuition-ρ k should be same regardless of different k. We should state that such a counterintuitive phenomenon comes from the case that ''larger'' nodes have few opportunities to stay in a susceptible state because of the higher probability of being infected. So the lower inclination ρ k comes from the lower chance of choice, but not from the lower willingness of vaccination. To higher chance to be infected, so they have fewer opportunities to decide whether to take vaccination or not. As one can predict: diseases can much more easily spread on networks with an increase of the average degree. However, under the voluntary vaccination mechanism, a higher level of disease leads to more vaccinated persons, so the discussed phenomenon above may change. In Fig. 5 we study the final number of infections versus average degree of networks for the two cases. As one can see from Fig. 5(a) , for the uniform case, the final number of infections increases with the average degree of network. However, for the preferential case, the final number of infections increases with average degree at first, and then the less favorable situation is controlled when the average degree is large (see Fig. 5(b) ). What causes such a distinct result? To answer this question, we reexamine Eqs. (7) and (9) . From Eq. (7) we can find that the perceived risk function of the uniform case is not related to the degree. As a result, even though the high prevalence of disease for large average degree can provoke more individuals to take vaccination, such an endeavor is not large enough to offset the serious result from the larger average degree, which offers greater conveniences for the spread of the epidemic on networks. For the preferential case, since each individual's perceived risk function is positively correlated to its degree, when the average degree is so large that everyone's perceived risk function is larger than the cost of vaccination f P v , then everyone is willing to take vaccination and then the diseases can be eradicated completely. Moreover, if no measures are taken, the final number of infections increases with the transmission rate β. However, under the voluntary vaccination mechanism, either for the uniform case or for the preferential case, the final number of infections increases with β and then decreases to some lower level. The phenomena can be explained as: at first, the final number of infections increases with β, then the proportion/density of infection is not large enough to cause alarm. As a result, the final number of infections increases with β initially. However, with the further increase transmission rate β, the risk functions for both cases are sufficiently high so that more and more susceptible individuals will take vaccination voluntarily. Thus, the infectious diseases are inhibited successfully. The analysis is verified by Fig. 6 . Moreover, an obvious result is also verified by Figs. 5 and 6: the lower the cost of vaccination f U v or f P v is, the more persons participate in the campaign of self-vaccination, and the better the consequences for disease prevention. Usually, whether the vaccines are permanent or not can change individuals' attitude towards vaccination. For example, due to the short validity of the influenza vaccine and not so serious consequences of regular human influenza, many individuals are reluctant to take vaccinations. However, for hepatitis B, even with the short validity of its vaccine, many people are still willing to take vaccination iteratively because of the high risk of hepatitis B. So, in the following we will investigate the effects of the validity of the vaccine on the spread of epidemics for the uniform case and the preferential case, respectively. To describe the variation of vaccine effectiveness among individuals, we assume that the vaccine validity period T v for each individual satisfies a normal distribution T v = N(50, 1.0). Namely, the mean value is 50 and the standard deviation is 1.0 (We also take T v in other forms, generally, the longer the period of validity is, the lower the level of infection is.) By comparing the uniform case with the preferential case, one can find that the number of infections and the number of vaccinations form more significant oscillations in the uniform case (see Fig. 7 ). Such a phenomenon is obvious: once the disease is prevalent, because of the imprecise information on the disease, most individuals choose to take vaccination en masse, the outbreak of the disease is controlled to a very low level, and individuals then relax their vigilance. However, the disease will break out again once the vaccine loses its effect on protecting individuals. Again, most individuals will take vaccination. In this way we observe strong oscillations with time (see Fig. 7(a) ). For the preferential case, because ''larger nodes'' are more diligent in taking vaccination, both the number of infections and the number of vaccinations show damped periodic oscillations and then reach a relative steady state, as shown in Fig. 7(b) . 


Section:main results