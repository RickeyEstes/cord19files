Tracking data collection and pre-processing A raw trajectory obtained from a student recording half day of his activity on campus using one of our A-GPS devices is illustrated in Figure 3a . The trajectory is displayed in 2D thus the time dimension is not shown. The campus buildings are shown as the spatial reference. It is noted that some portion of the trajectory close to a campus building appears to be noisy (indicated by the spiky portion of the track). This is caused by weak GPS signals around and inside buildings. The spike can sometimes reach very far due to the low-accuracy of positioning when the device is indoors. We employed the automatic pre-processing algorithm on the raw data and conducted spatiotemporal segmentation. Figure 3b shows the preprocessed trajectory and Figure 3c displays the segmented trajectory with color-coded indoor and outdoor segments in the space-time cube with reference to photo imagery and campus buildings. The horizontal dimensions represent space and the vertical dimension is time. While oblique lines indicate movement in space, straight segments should represent stays over a period of time. Trajectories collected by one participant using three different tracking devices are shown in Figure 4a . It shows that the three trajectories miss-match each other for some portions of the activity space, especially during indoor stays. Figure 4b shows the pre-processed trajectories and we see the three trajectories match each other much better after removing erroneous points. Table 1 lists the basic parameters of the three devices. The handheld GPS has the minimal time interval setting and longest battery life. But continuous data collection over several days would require participants to possess basic skills of using the GPS (i.e., saving tracks). iPhone 3 G has the shortest battery life when set to actively record and save locations. The A-GPS device we used, the Worldtracker GPRS, has a 15 hour battery life that enables the recording of an entire daytime trajectory with a simple plug-in charging at night. It also is not limited in data storage as the data transmits to the data server immediately via a cellular network. All three devices were reported to have similar spatial accuracies. The A-GPS, however, has the coarsest temporal resolution (15 seconds) among the three devices tested. These have resulted slightly more generalized trajectories in timespace as indicated by the red trajectory in Figure 4b . A three-day experiment was conducted with ten students to collect trajectories paired with diary records. Among the 30 trajectory-diary pairs, ten were excluded from our analysis as they either contain incomplete diary records (missing time periods in between records), very short or even no on-campus stays (less than 2 hours), or missing A-GPS signal (one A-GPS was out of battery in the middle of a recording due to forgotten charging). From the diary data, a total number of 55 indoor stays on campus with a total length of 63.15 hours were recorded. The pre-processed and segmented A-GPS trajectories captured 57 indoor stays with a total length of 65.40 hours. Two indoor stays described in the diary were missing from the trajectory data, while the later captured 4 more segments that were not recorded in the diary. The mismatch between the two sets of data could be due to errors in either the segmented trajectory data or the diary data or both. By examining the mismatches and interviewing students who participated in the study we found that one of the two "miss"es by the trajectory data lasted only 2 minutes and the other happened after a long-stay in a dorm building when the device probably has suffered from a slow fix time. It has also occurred to us that the diary takers may not have often recorded activities as soon as they happened but wrote their diaries out of memory when time allowed. As a result they often recorded down a rough estimate of time and some activities could be completely missing as such skipped their memories. One problem we noticed from the comparison was that the segmentation algorithm we used sometimes mislabelled an indoor segment in a wrong building, especially when two buildings are connected to each other, which is the case with some buildings in our study, such as a group of dormitory halls on campus. Improvement on this aspect of the algorithm is needed. At the same time, an attempt to remediate the problem exercised in this study was to examine student behaviour by deriving attributes associated with a particular type of activity instead of the specific location-activity. The time that students spent in their dorm buildings is such an attribute. The dorm time recorded in the diary data totalled to be 10.70 and that derived from the trajectory data was 10.32 hours. These two experiments indicate that all three commonly used GPS or A-GPS devices perform comparable in obtaining detailed trajectory data for space time activity studies. Handheld GPS supports the most temporal details but needs intervention for long durations of data collection. iPhone and the Worldtracker GPRS are both A-GPS based devices. However, the added indoor tracking ability does not lead to improvement as the cellular network positioning accuracy could be 50 meters or greater depending on the density of available cellular network. The battery life of the iPhone device is of the most concern in this experiment but new generations of the smart phone and better apps could improve significantly on this aspect. The Worldtracker GPRS employed in this study generates the coarsest trajectories but is the most user-friendly that doesn't require any user intervention except for night charging. It also supports long duration of tracking as there is no limit of data storage. Comparison to diary data indicated that the trajectory data captured with the GPRS was able to approximate major patterns in students' on-campus activities, and the 15 second time-interval still provides much finer temporal resolution than the traditional diary data could record. 


Section:results and discussion